<html>
<head></head>
<body>
    <div>f12 delete the barrier</div>
    <div id="game"></div>
    <script src="./crafty.js"></script>
    <script src="./jquery-3.1.1.min.js"></script>
    <script src="./createPlayer.js"></script>
    <script>
        Crafty.init(500,450, document.getElementById('game'));

        Crafty.e('2D, Collision, Canvas, Color')
            .attr({x: 100, y: 315, w: 35, h: 35})
            .color('green')
            .onHit('Twoway', function(data){                
                window.location.href = "Level4.html";
            });

        Crafty.e('2D, Collision, Canvas')
            .attr({x: -1000, y: 500, w: 4000, h: 1})
            .onHit('Twoway', function(data){
                window.location.href = "Level3.html";
            });

        var player = createPlayer(0, 0);
//where map data starts
        var craftyObjectIds={ent3: "Floor"};
        var floor = Crafty.e('Floor, 2D, DOM, Color')
            .attr({x: 0, y: 250, w: 400, h: 10})
            .color('red')
            .bind("EnterFrame", function () {
				var regex = /transform: translate3d\((-?\d+)px, (-?\d+)px, (-?\d+)px\)/g
				var transform = regex.exec(this._element.outerHTML);
				if (transform) {
					var posX = parseInt(transform[1]);
					var posY = parseInt(transform[2]);
					var sizeW = this._element.clientWidth;
					var sizeH = this._element.clientHeight;
					this.attr({x: posX, y: posY, w: sizeW, h: sizeH})
				}
            	
        		if(!this._element.parentNode) {
        			this.destroy();
        			Crafty('Twoway').get()[0].ay = 500;
        		}
        	});
    </script>
</body>
</html>
