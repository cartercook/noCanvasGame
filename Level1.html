<html>
<head></head>
<body>
	<div>the game begins</div>
	<div id="game"></div>
	<script src="./crafty.js"></script>
	<script src="./jquery-3.1.1.min.js"></script>
	<script src="./createPlayer.js"></script>
	<script>

		callback = function(records){
   			console.log(records);
// something was removed
   			if (records[0].removedNodes.length > 0){
   				records[0].removedNodes.forEach(function(elm){
					console.log(elm.id);
					Crafty(craftyObjectIds[elm.id]).destroy();
				});
   			} else {

//something was added
            if(records[0].addedNodes.length > 0) {
				records[0].addedNodes.forEach(function(elm){
					console.log(elm.id);
				});
//something changed
			} else {
				console.log(records[0].target.style["width"]);
			}
			}
		}

		var observer = new MutationObserver(callback);

		var observerConfig = {
			attributes: true, 
			childList: true, 
			characterData: true,
			subtree: true,
		};

		var targetNode = document.body;

		Crafty.init(500,350, document.getElementById('game'));

		createPlayer(0, 0);

		Crafty.e('2D, Collision, Canvas, Color')
			.attr({x: 300, y: 215, w: 35, h: 35})
			.color('green')
			.onHit('Twoway', function(data){
				window.location.href = "Level2.html";
			});

		Crafty.e('2D, Collision, Canvas')
			.attr({x: -1000, y: 400, w: 3000, h: 1})
			.onHit('Twoway', function(data) {
				window.location.href = "Level1.html";
			});

		Crafty.sprite(16, "windowLong.png", {
    		WindowLong: [0,0,429,243] //x,y,width,height
		});

//where map data starts
		var craftyObjectIds={ent1: "Floor"};
        Crafty.e('Floor, 2D, Canvas, Color, WindowLong')
            .attr({x: 0, y: 250})

		observer.observe(targetNode, observerConfig);
	</script>
</body>
</html>
